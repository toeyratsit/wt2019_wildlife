const textElement = document.getElementById('text')
const optionButtonsElement = document.getElementById('option-buttons')

let state = {}


function startGame() {
    state = {}
    showText(1)

}

function showText(textNodeIndex) {
    const textNode = textNodes.find(textNode => textNode.id === textNodeIndex)
    textElement.innerText = textNode.text
    while (optionButtonsElement.firstChild) {
        optionButtonsElement.removeChild(optionButtonsElement.firstChild)
    }

    textNode.options.forEach(option => {
        if (showOption(option)) {
            const button = document.createElement('button')
            button.innerText = option.text
            button.classList.add('btn')
            button.addEventListener('click', () => Option(option))
            optionButtonsElement.appendChild(button)
        }
    })
}

function showOption(option) {
    return option.requiredState == null || option.requiredState(state)
}

function Option(option) {
    const nextTextNodeId = option.nextText
    if (nextTextNodeId <= 0) {
        return startGame()
    }
    state = Object.assign(state, option.setState)
    showText(nextTextNodeId)
}

const textNodes = [{
        id: 1,
        text: 'à¸à¸¹à¸›à¸£à¸µà¹€à¸›à¹‡à¸™à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¸ˆà¸³à¸žà¸§à¸à¹ƒà¸” ?',
        options: [{
                text: 'à¸ˆà¸³à¸žà¸§à¸à¸ªà¸±à¸•à¸§à¹Œà¸™à¹‰à¸³',
                nextText: 12,

            },
            {
                text: 'à¸ˆà¸³à¸žà¸§à¸à¸ªà¸±à¸•à¸§à¹Œà¸›à¸µà¸',
                nextText: 12
            }, {
                text: 'à¸ˆà¸³à¸žà¸§à¸à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸¥à¸¹à¸à¸”à¹‰à¸§à¸¢à¸™à¸¡',
                nextText: 2,
            },
            {
                text: 'à¸ˆà¸³à¸žà¸§à¸à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸·à¹‰à¸­à¸¢à¸„à¸¥à¸²à¸™',
                nextText: 12
            }
        ]
    },
    {
        id: 2,
        text: 'à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¸ˆà¸³à¸žà¸§à¸à¸ªà¸±à¸•à¸§à¹Œà¹€à¸¥à¸µà¹‰à¸¢à¸‡à¸¥à¸¹à¸à¸”à¹‰à¸§à¸¢à¸™à¸¡à¸•à¸±à¸§à¹ƒà¸” à¸¡à¸µà¸„à¸§à¸²à¸¡à¹€à¸ªà¸µà¹ˆà¸¢à¸‡à¸—à¸µà¹ˆà¸ˆà¸°à¸ªà¸¹à¸à¸žà¸±à¸™à¸˜à¹Œà¸¸à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸” ?',
        options: [{
                text: 'à¸à¸£à¸°à¸‹à¸¹à¹ˆ',
                nextText: 3
            },
            {
                text: 'à¸à¸§à¸²à¸‡à¸œà¸²',
                nextText: 21
            },
            {
                text: 'à¸„à¸§à¸²à¸¢à¸›à¹ˆà¸²',
                nextText: 21
            },
            {
                text: 'à¸ªà¸¡à¸±à¸™',
                nextText: 21
            }
        ]
    },
    {
        id: 3,
        text: 'à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¹ƒà¸™à¸›à¸£à¸°à¹€à¸—à¸¨à¹„à¸—à¸¢à¸‚à¹‰à¸­à¹ƒà¸”à¸—à¸µà¹ˆà¹„à¸”à¹‰à¸¡à¸µà¸à¸²à¸£à¸ªà¸¹à¸à¸žà¸±à¸™à¸˜à¸¸à¹Œà¹„à¸›à¹à¸¥à¹‰à¸§ ?',
        options: [{
                text: 'à¸à¸§à¸²à¸‡à¸œà¸²',
                nextText: 13
            },
            {
                text: 'à¸ªà¸¡à¸±à¸™',
                nextText: 4
            },
            {
                text: 'à¸™à¸à¹€à¸ˆà¹‰à¸²à¸Ÿà¹‰à¸²à¸«à¸à¸´à¸‡à¸ªà¸´à¸£à¸´à¸™à¸˜à¸£',
                nextText: 4
            },
            {
                text: 'à¸§à¸²à¸¬à¸šà¸£à¸¹à¸”à¹‰à¸²',
                nextText: 13
            }
        ]
    },
    {
        id: 4,
        text: 'à¸‚à¹‰à¸­à¹ƒà¸”à¸à¸¥à¹ˆà¸²à¸§à¸–à¸¹à¸à¸•à¹‰à¸­à¸‡ ?',
        options: [{
                text: 'à¸™à¸à¸à¸°à¹€à¸£à¸µà¸¢à¸™à¸¡à¸µà¸à¸²à¸£à¹€à¸à¸µà¹‰à¸¢à¸§à¸žà¸²à¸£à¸²à¸ªà¸µà¸”à¹‰à¸§à¸¢à¸à¸²à¸£à¸šà¸´à¸™à¸‚à¸¶à¹‰à¸™à¹„à¸›à¸šà¸™à¸—à¸µà¹ˆà¸ªà¸¹à¸‡',
                nextText: 14
            }, {
                text: 'à¸¥à¸°à¸¡à¸±à¹ˆà¸‡à¹€à¸›à¹‡à¸™à¸ªà¸±à¸•à¸§à¹Œà¸—à¸µà¹ˆà¸„à¸¥à¹‰à¸²à¸¢à¸à¸±à¸šà¹à¸žà¸°à¹à¸¥à¸°à¹à¸à¸°',
                nextText: 14
            }, {
                text: 'à¸žà¸°à¸¢à¸¹à¸™à¹‚à¸”à¸¢à¸—à¸±à¹ˆà¸§à¹„à¸›à¸ˆà¸°à¸­à¸²à¸¨à¸±à¸¢à¸­à¸¢à¸¹à¹ˆà¹ƒà¸™à¸šà¸£à¸´à¹€à¸§à¸“à¸™à¹‰à¸³à¸¥à¸¶à¸',
                nextText: 14
            },
            {
                text: 'à¹€à¸•à¹ˆà¸²à¸¡à¸°à¹€à¸Ÿà¸·à¸­à¸‡à¹€à¸›à¹‡à¸™à¹€à¸•à¹ˆà¸²à¸—à¸°à¹€à¸¥à¸—à¸µà¹ˆà¸¡à¸µà¸‚à¸™à¸²à¸”à¹ƒà¸«à¸à¹ˆà¸—à¸µà¹ˆà¸ªà¸¸à¸”',
                nextText: 5
            }
        ]
    },
    {
        id: 5,
        text: 'à¸­à¸²à¸«à¸²à¸£à¸‚à¸­à¸‡à¸ªà¸±à¸•à¸§à¹Œà¹ƒà¸™à¸‚à¹‰à¸­à¹ƒà¸”à¹à¸•à¸à¸•à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸žà¸§à¸ ?',
        options: [{
                text: 'à¹à¸¡à¸§à¸¥à¸²à¸¢à¸«à¸´à¸™à¸­à¹ˆà¸­à¸™',
                nextText: 6
            },
            {
                text: 'à¸à¸¹à¸›à¸£à¸µ',
                nextText: 15
            },
            {
                text: 'à¹€à¸à¹‰à¸‡à¸«à¸¡à¹‰à¸­',
                nextText: 15
            },
            {
                text: 'à¸¥à¸°à¸¡à¸±à¹ˆà¸‡',
                nextText: 15
            }
        ]
    },
    {
        id: 6,
        text: 'à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¹ƒà¸™à¸‚à¹‰à¸­à¹ƒà¸”à¸¡à¸µà¸£à¸°à¸¢à¸°à¹€à¸§à¸¥à¸²à¸à¸²à¸£à¸•à¸±à¹‰à¸‡à¸—à¹‰à¸­à¸‡à¹€à¸›à¹‡à¸™à¹€à¸§à¸¥à¸² 9 à¹€à¸”à¸·à¸­à¸™ ?',
        options: [{
                text: 'à¸ªà¸¡à¹€à¸ªà¸£à¹‡à¸ˆ',
                nextText: 16
            },
            {
                text: 'à¸„à¸§à¸²à¸¢à¸›à¹ˆà¸²',
                nextText: 16
            },
            {
                text: 'à¸à¸¹à¸›à¸£à¸µ',
                nextText: 7
            },
            {
                text: 'à¸§à¸²à¸¬à¸šà¸£à¸¹à¸”à¹‰à¸²',
                nextText: 16
            },
        ]
    },
    {
        id: 7,
        text: 'à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¹ƒà¸™à¸‚à¹‰à¸­à¹ƒà¸”à¸—à¸µà¹ˆà¸¥à¹ˆà¸²à¸ªà¸¸à¸”à¸–à¸¹à¸à¸šà¸£à¸£à¸ˆà¸¸à¹€à¸žà¸´à¹ˆà¸¡à¹€à¸‚à¹‰à¸²à¸¡à¸²à¹ƒà¸™à¸£à¸²à¸¢à¸Šà¸·à¹ˆà¸­à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¸ªà¸‡à¸§à¸™ ?',
        options: [{
                text: 'à¸¥à¸°à¸¡à¸±à¹ˆà¸‡',
                nextText: 17
            },
            {
                text: 'à¸à¸§à¸²à¸‡à¸œà¸²',
                nextText: 17
            },
            {
                text: 'à¹€à¸•à¹ˆà¸²à¸¡à¸°à¹€à¸Ÿà¸·à¸­à¸‡',
                nextText: 8
            },
            {
                text: 'à¸›à¸¥à¸²à¸‰à¸¥à¸²à¸¡à¸§à¸²à¸¬',
                nextText: 17
            }
        ]
    },
    {
        id: 8,
        text: 'à¸›à¸¥à¸²à¸‰à¸¥à¸²à¸¡à¸§à¸²à¸¬ à¸¡à¸µà¸„à¸£à¸µà¸šà¸­à¸à¹à¸¥à¸°à¸„à¸£à¸µà¸šà¸«à¸²à¸‡à¸­à¸¢à¹ˆà¸²à¸‡à¸¥à¸°à¸à¸µà¹ˆà¸­à¸±à¸™ ?',
        options: [{
            text: 'à¸„à¸£à¸µà¸šà¸­à¸ 1 à¸­à¸±à¸™ à¹à¸¥à¸°à¸„à¸£à¸µà¸šà¸«à¸²à¸‡ 1 à¸­à¸±à¸™',
            nextText: 18
        }, {
            text: 'à¸„à¸£à¸µà¸šà¸­à¸ 2 à¸­à¸±à¸™ à¹à¸¥à¸°à¸„à¸£à¸µà¸šà¸«à¸²à¸‡ 1 à¸­à¸±à¸™',
            nextText: 18
        }, {
            text: 'à¸„à¸£à¸µà¸šà¸­à¸ 1 à¸­à¸±à¸™ à¹à¸¥à¸°à¸„à¸£à¸µà¸šà¸«à¸²à¸‡ 2 à¸­à¸±à¸™',
            nextText: 18
        }, {
            text: 'à¸„à¸£à¸µà¸šà¸­à¸ 2 à¸­à¸±à¸™ à¹à¸¥à¸°à¸„à¸£à¸µà¸šà¸«à¸²à¸‡ 2 à¸­à¸±à¸™',
            nextText: 9
        }]
    },
    {
        id: 9,
        text: 'à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¹ƒà¸™à¸‚à¹‰à¸­à¹ƒà¸”à¹à¸•à¸à¸•à¹ˆà¸²à¸‡à¸ˆà¸²à¸à¸žà¸§à¸ ?',
        options: [{
                text: 'à¸§à¸²à¸¬à¸šà¸£à¸¹à¸”à¹‰à¸²',
                nextText: 10
            },
            {
                text: 'à¸ªà¸¡à¸±à¸™',
                nextText: 19
            },
            {
                text: 'à¸à¸¹à¸›à¸£à¸µ',
                nextText: 19
            },
            {
                text: 'à¸™à¸à¸à¸£à¸°à¹€à¸£à¸µà¸¢à¸™',
                nextText: 19
            }
        ]
    },
    {
        id: 10,
        text: 'à¸žà¸£à¸°à¸£à¸²à¸Šà¸šà¸±à¸à¸à¸±à¸•à¸´à¸ªà¸‡à¸§à¸™à¹à¸¥à¸°à¸„à¸¸à¹‰à¸¡à¸„à¸£à¸­à¸‡à¸ªà¸±à¸•à¸§à¹Œà¸›à¹ˆà¸²à¸‰à¸šà¸±à¸šà¹à¸£à¸à¸•à¸£à¸²à¸‚à¸¶à¹‰à¸™à¹€à¸¡à¸·à¹ˆà¸­à¸›à¸µ à¸ž.à¸¨. à¹ƒà¸” ?',
        options: [{
                text: 'à¸ž.à¸¨.2535',
                nextText: 20
            },
            {
                text: 'à¸ž.à¸¨.2510',
                nextText: 20
            },
            {
                text: 'à¸ž.à¸¨.2503',
                nextText: 11
            },
            {
                text: 'à¸ž.à¸¨.2530',
                nextText: 20
            }
        ]
    },
    {
        id: 11,
        text: 'à¸¢à¸´à¸™à¸”à¸µà¸”à¹‰à¸§à¸¢à¸„à¸¸à¸“à¹„à¸”à¹‰ 10 à¸„à¸°à¹à¸™à¸™ ðŸ¤©ðŸŽ‰ðŸŽŠ',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    },
    //// score ////
    {
        id: 12,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸„à¸°à¹à¸™à¸™ à¸ªà¸¹à¹‰à¹† à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸™à¸° ðŸ¤',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 13,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 2 à¸„à¸°à¹à¸™à¸™ à¸ªà¸¹à¹‰à¹† à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸™à¸° ðŸ¤˜',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 14,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 3 à¸„à¸°à¹à¸™à¸™ à¸ªà¸¹à¹‰à¹† à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸™à¸° ðŸ¤Ÿ',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 15,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 4 à¸„à¸°à¹à¸™à¸™ à¸ªà¸¹à¹‰à¹† à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸™à¸° âœŒâœŒ',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 16,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 5 à¸„à¸°à¹à¸™à¸™ ðŸ–',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    },
    {
        id: 17,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 6 à¸„à¸°à¹à¸™à¸™ ðŸ˜‰',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 18,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 7 à¸„à¸°à¹à¸™à¸™ ðŸ˜°',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 19,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 8 à¸„à¸°à¹à¸™à¸™ ðŸ˜°',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 20,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 9 à¸„à¸°à¹à¸™à¸™ ðŸ˜±',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }, {
        id: 21,
        text: 'à¸•à¸­à¸šà¸œà¸´à¸” à¹„à¸”à¹‰ 1 à¸„à¸°à¹à¸™à¸™ à¸ªà¸¹à¹‰à¹† à¸¥à¸­à¸‡à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡à¸™à¸° ðŸ¤',
        options: [{
            text: 'à¹€à¸¥à¹ˆà¸™à¹ƒà¸«à¸¡à¹ˆà¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡',
            nextText: -1
        }]
    }
]

startGame()